generator client {
  provider = "prisma-client-js"
}

datasource database {
  provider = "mysql"
  url = env("DATABASE_URL")
}

model categoria {
  id Int @id @default(autoincrement())
  nombre String @unique
  descripcion String
  productos producto[]
}
model producto {
  id Int @id @default(autoincrement())
  id_categoria Int
  nombre String
  descripcion String
  precio Decimal
  cantidad Int
  categoria categoria @relation(fields: [id_categoria], references: [id], onDelete: Cascade, onUpdate: Cascade)
  detalles venta_detalles[]
}
model rol {
  id Int @id @default(autoincrement())
  nombre String @unique
  rol usuario[]
}
model usuario {
  id Int @id @default(autoincrement())
  id_rol Int @default(1)
  nombre String
  correo String @unique
  contrasenia String
  fecha_nacimiento DateTime
  genero String
  rol rol @relation(fields: [id_rol], references: [id], onDelete: Cascade, onUpdate: Cascade)
  ventas venta[]
}
model venta {
  id Int @id @default(autoincrement())
  id_vendedor Int
  total Decimal
  fecha DateTime @default(now())
  usuario usuario @relation(fields: [id_vendedor], references: [id])
  detalles venta_detalles[]
}
model venta_detalles {
  id Int @id @default(autoincrement())
  id_venta Int
  id_producto Int
  cantidad Int
  venta venta @relation(fields: [id_venta], references: [id], onDelete: Cascade, onUpdate: Cascade)
  producto producto @relation(fields: [id_producto], references: [id], onDelete: Cascade, onUpdate: Cascade)
}
